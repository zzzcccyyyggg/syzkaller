var addr ffff88810f051300, addr masked 88810f051300
Kernel panic: ============ DATARACE ============
VarName 2870364362311847012, BlockLineNumber 9, IrLineNumber 1, is write 0
Function: found_watchpoint kernel/kccwf/wp_checker.c:298 [inline]
Function: watchpoints_monitor+0x13cd/0x1a10 kernel/kccwf/wp_checker.c:406
Function: handle_monitor_mode+0xca/0xf0 kernel/kccwf/core.c:193
Function: kccwf_rec_mem_access+0x391/0x410 kernel/kccwf/core.c:530
Function: btrfs_get_root_last_trans fs/btrfs/ctree.h:369 [inline]
Function: btrfs_record_root_in_trans+0x228/0x4b0 fs/btrfs/transaction.c:499
Function: start_transaction+0x8dc/0x38a0 fs/btrfs/transaction.c:779
Function: btrfs_join_transaction+0x42/0x60 fs/btrfs/transaction.c:830
Function: btrfs_ioctl_qgroup_create+0x4bc/0x750 fs/btrfs/ioctl.c:3841
Function: btrfs_ioctl+0x405/0x1080 fs/btrfs/ioctl.c:5327
Function: vfs_ioctl fs/ioctl.c:51 [inline]
Function: __do_sys_ioctl fs/ioctl.c:907 [inline]
Function: __se_sys_ioctl+0xfc/0x170 fs/ioctl.c:893
Function: do_syscall_x64 arch/x86/entry/syscall_64.c:63 [inline]
Function: do_syscall_64+0xd2/0x200 arch/x86/entry/syscall_64.c:94
Function: entry_SYSCALL_64_after_hwframe+0x77/0x7f
Function: 0x0
============OTHER_INFO============
VarName 1320040775806694287, BlockLineNumber 43, IrLineNumber 1, watchpoint index 8975
Function: set_report_info+0xa6/0x200 kernel/kccwf/report.c:54
Function: setup_watchpoint kernel/kccwf/wp_checker.c:329 [inline]
Function: watchpoints_monitor+0xda8/0x1a10 kernel/kccwf/wp_checker.c:395
Function: handle_monitor_mode+0xca/0xf0 kernel/kccwf/core.c:193
Function: kccwf_rec_mem_access+0x391/0x410 kernel/kccwf/core.c:530
Function: btrfs_set_root_last_trans fs/btrfs/ctree.h:374 [inline]
Function: record_root_in_trans+0x806/0xab0 fs/btrfs/transaction.c:437
Function: btrfs_record_root_in_trans+0x3d9/0x4b0 fs/btrfs/transaction.c:504
Function: start_transaction+0x8dc/0x38a0 fs/btrfs/transaction.c:779
Function: btrfs_join_transaction+0x42/0x60 fs/btrfs/transaction.c:830
Function: btrfs_ioctl_qgroup_create+0x4bc/0x750 fs/btrfs/ioctl.c:3841
Function: btrfs_ioctl+0x405/0x1080 fs/btrfs/ioctl.c:5327
Function: vfs_ioctl fs/ioctl.c:51 [inline]
Function: __do_sys_ioctl fs/ioctl.c:907 [inline]
Function: __se_sys_ioctl+0xfc/0x170 fs/ioctl.c:893
Function: do_syscall_x64 arch/x86/entry/syscall_64.c:63 [inline]
Function: do_syscall_64+0xd2/0x200 arch/x86/entry/syscall_64.c:94
Function: entry_SYSCALL_64_after_hwframe+0x77/0x7f
=================END==============
------------[ cut here ]------------
kernel BUG at fs/buffer.c:1320!
Oops: invalid opcode: 0000 [#1] SMP KASAN NOPTI
CPU: 3 UID: 0 PID: 16627 Comm: syz-executor.9 Tainted: G    B               6.16.0-rc1-g836c2326e999-dirty #41 PREEMPT(voluntary) 
Tainted: [B]=BAD_PAGE
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:check_irqs_on fs/buffer.c:1320 [inline]
RIP: 0010:lookup_bh_lru fs/buffer.c:1372 [inline]
RIP: 0010:find_get_block_common+0xf32/0x1070 fs/buffer.c:1410
Code: 84 24 a0 00 00 00 75 17 48 89 d8 48 8d 65 d8 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc cc e8 84 a2 17 04 e8 bf 78 b8 ff 90 <0f> 0b e8 b7 78 b8 ff 90 0f 0b 44 89 f9 80 e1 07 80 c1 03 38 c1 0f
RSP: 0018:ffff88815139e9e0 EFLAGS: 00010082
RAX: ffffffff81ba3a31 RBX: 0000000000001000 RCX: 0000000029000000
RDX: ffffc9000a55a000 RSI: 000000000000babf RDI: 000000000000bac0
RBP: ffff88815139eae0 R08: ffff888107998d23 R09: 1ffff11020f331a4
R10: dffffc0000000000 R11: ffffed1020f331a5 R12: 1ffff1102a273d44
R13: 0000000000202021 R14: 0000000000000000 R15: ffff8881006a8000
FS:  00007f772986e6c0(0000) GS:ffff888244b0d000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fc7eef38000 CR3: 00000001521cd000 CR4: 00000000000006f0
Call Trace:
 <TASK>
 __find_get_block_nonatomic fs/buffer.c:1435 [inline]
 bdev_getblk+0x83/0x520 fs/buffer.c:1459
 getblk_unmovable include/linux/buffer_head.h:371 [inline]
 ext4_getblk+0x2a7/0x770 fs/ext4/inode.c:975
 ext4_bread_batch+0x65/0x4d0 fs/ext4/inode.c:1044
 __ext4_find_entry+0x1022/0x1f00 fs/ext4/namei.c:1601
 ext4_lookup_entry fs/ext4/namei.c:1703 [inline]
 ext4_lookup+0x137/0x640 fs/ext4/namei.c:1771
 lookup_open fs/namei.c:3686 [inline]
 open_last_lookups fs/namei.c:3807 [inline]
 path_openat+0x12f7/0x37d0 fs/namei.c:4043
 do_filp_open+0x1fd/0x470 fs/namei.c:4073
 file_open_name fs/open.c:1381 [inline]
 filp_open+0x176/0x1d0 fs/open.c:1401
 kccwf_save_reported_to_file+0x8e/0x2b0 kernel/kccwf/report.c:117
 report_race+0x6d4/0x770 kernel/kccwf/report.c:106
 found_watchpoint kernel/kccwf/wp_checker.c:298 [inline]
 watchpoints_monitor+0x13cd/0x1a10 kernel/kccwf/wp_checker.c:406
 handle_monitor_mode+0xca/0xf0 kernel/kccwf/core.c:193
 kccwf_rec_mem_access+0x391/0x410 kernel/kccwf/core.c:530
 btrfs_get_root_last_trans fs/btrfs/ctree.h:369 [inline]
 btrfs_record_root_in_trans+0x228/0x4b0 fs/btrfs/transaction.c:499
 start_transaction+0x8dc/0x38a0 fs/btrfs/transaction.c:779
 btrfs_join_transaction+0x42/0x60 fs/btrfs/transaction.c:830
 btrfs_ioctl_qgroup_create+0x4bc/0x750 fs/btrfs/ioctl.c:3841
 btrfs_ioctl+0x405/0x1080 fs/btrfs/ioctl.c:5327
 vfs_ioctl fs/ioctl.c:51 [inline]
 __do_sys_ioctl fs/ioctl.c:907 [inline]
 __se_sys_ioctl+0xfc/0x170 fs/ioctl.c:893
 do_syscall_x64 arch/x86/entry/syscall_64.c:63 [inline]
 do_syscall_64+0xd2/0x200 arch/x86/entry/syscall_64.c:94
 entry_SYSCALL_64_after_hwframe+0x77/0x7f
RIP: 0033:0x7f772a4fd21d
Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 b8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007f772986e088 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 00007f772a6550a0 RCX: 00007f772a4fd21d
RDX: 0000000020001500 RSI: 000000004010942a RDI: 0000000000000004
RBP: 00007f772a56e0d0 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000000000
R13: ffffffffffffffb8 R14: 00007f772a6550a0 R15: 00007ffdccb74e80
 </TASK>
Modules linked in:
---[ end trace 0000000000000000 ]---
RIP: 0010:check_irqs_on fs/buffer.c:1320 [inline]
RIP: 0010:lookup_bh_lru fs/buffer.c:1372 [inline]
RIP: 0010:find_get_block_common+0xf32/0x1070 fs/buffer.c:1410
Code: 84 24 a0 00 00 00 75 17 48 89 d8 48 8d 65 d8 5b 41 5c 41 5d 41 5e 41 5f 5d c3 cc cc cc cc cc e8 84 a2 17 04 e8 bf 78 b8 ff 90 <0f> 0b e8 b7 78 b8 ff 90 0f 0b 44 89 f9 80 e1 07 80 c1 03 38 c1 0f
RSP: 0018:ffff88815139e9e0 EFLAGS: 00010082
RAX: ffffffff81ba3a31 RBX: 0000000000001000 RCX: 0000000029000000
RDX: ffffc9000a55a000 RSI: 000000000000babf RDI: 000000000000bac0
RBP: ffff88815139eae0 R08: ffff888107998d23 R09: 1ffff11020f331a4
R10: dffffc0000000000 R11: ffffed1020f331a5 R12: 1ffff1102a273d44
R13: 0000000000202021 R14: 0000000000000000 R15: ffff8881006a8000
FS:  00007f772986e6c0(0000) GS:ffff888244b0d000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fc7eef38000 CR3: 00000001521cd000 CR4: 00000000000006f0
note: syz-executor.9[16627] exited with irqs disabled
BTRFS error: failed to open device for path ÔÒœµX&·(>£&by»0Da…¥k,fêèd
Wãp&o∫F%<@‰¢ 2êNlŒ,å%$w˝ÙÍ¢>∑¢ºcêÊT1,ﬁûÙ~#π$'Oúà…ê‡Á˙5ÛU∞˙≤9\V8ù¬ïîäª,u«rUﬂ‘u»∏°juœ˘ı/LF€A«íÀBë‘0C≠˝Œê IÆ:Uòﬂ+ó,MΩ˘¸;{ﬂ—É5ºz^AOª,+∞k{¶„BﬁÒ@ZÔ∫üBó”v9∆gFëÿÙn¬ß·ﬂò◊~Eœâv¨O˘·gmƒEEWQ°ˇâ_#∆õÙáYóŒÈß—íç-b∞(≠°€
ÖW€%ΩY‹iÑñGËËáúé^)≠Ñ‹äÎi˛⁄Óíı∞&=3ÀO with flags 0x1: -2
