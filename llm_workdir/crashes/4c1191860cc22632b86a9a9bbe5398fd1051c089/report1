------------[ cut here ]------------
kernel BUG at fs/btrfs/extent-io-tree.c:572!
Oops: invalid opcode: 0000 [#1] SMP KASAN NOPTI
CPU: 1 UID: 0 PID: 15187 Comm: syz-executor.7 Tainted: G    B               6.16.0-rc1-g836c2326e999-dirty #41 PREEMPT(voluntary) 
Tainted: [B]=BAD_PAGE
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:clear_state_bit+0xcb3/0xcc0 fs/btrfs/extent-io-tree.c:572
Code: ff ff 48 8b 0c 24 80 e1 07 38 c1 0f 8c b3 fc ff ff 48 8b 3c 24 e8 bd 24 65 fe e9 a5 fc ff ff e8 b3 e7 30 fe e8 ae e7 30 fe 90 <0f> 0b 66 66 2e 0f 1f 84 00 00 00 00 00 90 90 90 90 90 90 90 90 90
RSP: 0018:ffff88810ae8ec48 EFLAGS: 00010286
RAX: ffffffff8341cb42 RBX: 00000000fffffff4 RCX: 0000000006400000
RDX: ffffc9000c98c000 RSI: 000000000001e680 RDI: 000000000001e681
RBP: 0000000000000000 R08: 0000000000000080 R09: 1ffffffff1a596a2
R10: dffffc0000000000 R11: fffffbfff1a596a3 R12: 0000000000000800
R13: ffff88813b7642d0 R14: ffff88813b7642d8 R15: 1ffff110276ec85b
FS:  00007f4f3f10f6c0(0000) GS:ffff88826760d000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000001b2ed21000 CR3: 000000011d6a7000 CR4: 00000000000006f0
Call Trace:
 <TASK>
 btrfs_clear_extent_bit_changeset+0xf43/0x1950 fs/btrfs/extent-io-tree.c:748
 btrfs_clear_record_extent_bits+0x7c/0xe0 fs/btrfs/extent-io-tree.c:1879
 __btrfs_qgroup_release_data+0x516/0x1920 fs/btrfs/qgroup.c:4387
 btrfs_qgroup_release_data+0x50/0x70 fs/btrfs/qgroup.c:4443
 insert_prealloc_file_extent fs/btrfs/inode.c:8896 [inline]
 __btrfs_prealloc_file_range+0xa2f/0x2960 fs/btrfs/inode.c:8993
 btrfs_prealloc_file_range+0x59/0x90 fs/btrfs/inode.c:9071
 btrfs_fallocate+0x2ec9/0x3fd0 fs/btrfs/file.c:3178
 vfs_fallocate+0x506/0x5e0 fs/open.c:341
 file_ioctl+0x5c3/0x720 fs/ioctl.c:290
 do_vfs_ioctl+0xd74/0x1a70 fs/ioctl.c:886
 __do_sys_ioctl fs/ioctl.c:905 [inline]
 __se_sys_ioctl+0x82/0x170 fs/ioctl.c:893
 do_syscall_x64 arch/x86/entry/syscall_64.c:63 [inline]
 do_syscall_64+0xd2/0x200 arch/x86/entry/syscall_64.c:94
 entry_SYSCALL_64_after_hwframe+0x77/0x7f
RIP: 0033:0x7f4f3fd7c59d
Code: ff c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 b8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007f4f3f10f088 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 00007f4f3fecbf80 RCX: 00007f4f3fd7c59d
RDX: 0000000020000040 RSI: 000000004030582a RDI: 0000000000000003
RBP: 00007f4f3f10f110 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000000002
R13: ffffffffffffffb8 R14: 00007f4f3fecbf80 R15: 00007ffda32b9fa0
 </TASK>
Modules linked in:
---[ end trace 0000000000000000 ]---
RIP: 0010:clear_state_bit+0xcb3/0xcc0 fs/btrfs/extent-io-tree.c:572
Code: ff ff 48 8b 0c 24 80 e1 07 38 c1 0f 8c b3 fc ff ff 48 8b 3c 24 e8 bd 24 65 fe e9 a5 fc ff ff e8 b3 e7 30 fe e8 ae e7 30 fe 90 <0f> 0b 66 66 2e 0f 1f 84 00 00 00 00 00 90 90 90 90 90 90 90 90 90
RSP: 0018:ffff88810ae8ec48 EFLAGS: 00010286
RAX: ffffffff8341cb42 RBX: 00000000fffffff4 RCX: 0000000006400000
RDX: ffffc9000c98c000 RSI: 000000000001e680 RDI: 000000000001e681
RBP: 0000000000000000 R08: 0000000000000080 R09: 1ffffffff1a596a2
R10: dffffc0000000000 R11: fffffbfff1a596a3 R12: 0000000000000800
R13: ffff88813b7642d0 R14: ffff88813b7642d8 R15: 1ffff110276ec85b
FS:  00007f4f3f10f6c0(0000) GS:ffff88826760d000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000001b2ed21000 CR3: 000000011d6a7000 CR4: 00000000000006f0
note: syz-executor.7[15187] exited with preempt_count 1
